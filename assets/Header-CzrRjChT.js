import{G as T,bv as x,a5 as z,bw as D,a3 as V,H as k,J as P,L as B,M as C,am as j,a6 as J,a7 as O,Q as i,a0 as l,Y as E,X as f,R as w,T as y,ag as A,aO as H,af as I,W as L,_ as M,aj as R,b6 as U,V as m,a1 as c,ah as $,bb as _,bc as r,b7 as q,bx as F,aE as h,bj as G}from"./index-cBNdzZ-c.js";import{u as Q}from"./editor-fb8UQ37Q.js";const W=T({size:{type:[Number,String],values:x,default:"",validator:n=>z(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:D},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:V(String),default:"cover"}}),X={error:n=>n instanceof Event},Y=k({name:"ElAvatar"}),K=k({...Y,props:W,emits:X,setup(n,{emit:u}){const a=n,o=P("avatar"),p=B(!1),b=C(()=>{const{size:e,icon:d,shape:t}=a,s=[o.b()];return j(e)&&s.push(o.m(e)),d&&s.push(o.m("icon")),t&&s.push(o.m(t)),s}),S=C(()=>{const{size:e}=a;return z(e)?o.cssVarBlock({size:J(e)||""}):void 0}),v=C(()=>({objectFit:a.fit}));O(()=>a.src,()=>p.value=!1);function g(e){p.value=!0,u("error",e)}return(e,d)=>(i(),l("span",{class:L(f(b)),style:E(f(S))},[(e.src||e.srcSet)&&!p.value?(i(),l("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:E(f(v)),onError:g},null,44,["src","alt","srcset"])):e.icon?(i(),w(f(H),{key:1},{default:y(()=>[(i(),w(A(e.icon)))]),_:1})):I(e.$slots,"default",{key:2})],6))}});var Z=M(K,[["__file","avatar.vue"]]);const ee=R(Z),se={class:"container flex slef-start align-items-center border-box"},te={class:"left flex justify-content-center align-items-center"},ae={class:"center flex align-items-center space-between pl-15 pr-15"},ne={key:0},oe={key:0},re={key:1},ie={class:"right flex justify-content-center align-items-center"},ce=k({__name:"Header",props:{isEditor:{type:Boolean,required:!0},id:{type:String,default:""}},setup(n){const u=U(),a=Q(),o=n,p=B("https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png");function b(){u.push("/")}function S(){_.confirm("确定要重置问卷吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.resetComs(),r({type:"success",message:"重置成功！"})},()=>{r({type:"info",message:"取消重置"})})}function v(){_.prompt("请输入问卷标题","提示",{inputPlaceholder:"请输入问卷标题"}).then(({value:d})=>{const t={createDate:new Date().getTime(),updateDate:new Date().getTime(),title:d,surveyCount:a.surveyCount,coms:JSON.parse(JSON.stringify(a.coms))};a.saveComs(t).then(s=>{r({type:"success",message:"保存成功！"}),u.push({name:"editor",params:{id:s}})},s=>{console.log(s),r({type:"error",message:"保存失败！"})})},()=>{r({type:"info",message:"取消保存"})})}function g(){_.confirm("确定要更新问卷吗？","提示",{type:"warning"}).then(()=>{a.updateComs(Number(o.id),{updateDate:new Date().getTime(),surveyCount:a.surveyCount,coms:JSON.parse(JSON.stringify(a.coms))}).then(()=>{r.success("更新成功！")})},()=>{r.info("已取消更新")})}function e(){_.confirm("预览会自动保存问卷，是否要跳转预览？","提示",{type:"info"}).then(()=>{o.id?g():v(),u.push({name:"preview",params:{id:o.id,from:"edit"}})},()=>{r.info("已取消预览")})}return(d,t)=>{const s=q,N=ee;return i(),l("header",null,[m("div",se,[m("div",te,[c(s,{icon:f(F),circle:"",size:"small",onClick:b},null,8,["icon"])]),m("div",ae,[n.isEditor?(i(),l("div",ne,[n.id?(i(),l("div",oe,[c(s,{type:"warning",size:"small",onClick:g},{default:y(()=>t[0]||(t[0]=[h("更新问卷")])),_:1})])):(i(),l("div",re,[c(s,{type:"danger",size:"small",onClick:S},{default:y(()=>t[1]||(t[1]=[h("重置问卷")])),_:1}),c(s,{type:"success",size:"small",onClick:v},{default:y(()=>t[2]||(t[2]=[h("保存问卷")])),_:1})]))])):$("",!0),m("div",null,[c(s,{type:"primary",size:"small",onClick:e},{default:y(()=>t[3]||(t[3]=[h("预览")])),_:1})])]),m("div",ie,[c(N,{size:30,src:p.value},null,8,["src"])])])])}}}),pe=G(ce,[["__scopeId","data-v-b11f68d9"]]);export{pe as B};
