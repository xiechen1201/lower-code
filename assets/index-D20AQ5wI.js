import{B as $}from"./Header-CzrRjChT.js";import{H as C,bp as R,b6 as N,aT as z,Q as m,a0 as p,V as u,W as S,X as a,a1 as c,T as g,bq as W,br as D,aO as L,bj as h,M as E,aa as M,bn as H,bc as b,bo as O,bs as P,L as j,a7 as y,R as U,ag as q,U as Q,Z as X,bt as Z,aC as A,a9 as B,b7 as F,bb as G,bu as J}from"./index-cBNdzZ-c.js";import{E as Y}from"./EditPannel-BPq8xsij.js";import{u as w,a as K}from"./editor-fb8UQ37Q.js";import{V as ee}from"./vuedraggable.umd-CujLEg4o.js";import{u as te}from"./hooks-ByxKuBvY.js";const se={class:"left-side-container flex"},ne={class:"tabs"},oe=C({__name:"index",setup(k){const t=R(),n=N(),s=()=>{n.push({name:"survey-type"})},i=()=>{n.push({name:"outline"})};return(r,e)=>{const _=L,x=z("RouterView");return m(),p("div",se,[u("div",ne,[u("div",{class:S(["tab-item",{"tab-show":a(t).name==="survey-type"}]),onClick:s},[c(_,null,{default:g(()=>[c(a(W))]),_:1}),e[0]||(e[0]=u("span",{class:"tab-item-title mt-5"},"题型",-1))],2),u("div",{class:S(["tab-item",{"tab-show":a(t).name==="outline"}]),onClick:i},[c(_,null,{default:g(()=>[c(a(D))]),_:1}),e[1]||(e[1]=u("span",{class:"tab-item-title mt-5"},"大纲",-1))],2)]),c(x,{class:"tab-pane"})])}}}),re=h(oe,[["__scopeId","data-v-2f63e40e"]]),ae={class:"right-side-container"},ce={key:0,class:"content flex justify-content-center align-items-center"},ie={key:1},ue=C({__name:"RightSide",setup(k){const t=w(),n=E(()=>t.coms[t.currentComponentIndex]),s=E(()=>n.value.status);M("updateStatus",i);function i(r,e){switch(r){case"title":case"desc":if(typeof e!="string"){console.error("Invalid payload type for 'type' or 'desc'. Expected string.");return}t.setTextStatus(n.value.status[r],e);break;case"position":if(typeof e!="number"){console.error("Invalid payload type for 'position'. Expected number.");return}t.setPosition(n.value.status[r],e);case"titleSize":case"descSize":if(typeof e!="number"){console.error("Invalid payload type for 'titleSize' or 'descSize'. Expected number.");return}t.setCurrentStatus(n.value.status[r],e);break;case"titleWeight":case"descWeight":if(typeof e!="number"){console.error("Invalid payload type for 'titleWeight' or 'descWeight'. Expected number.");return}t.setWeight(n.value.status[r],e);break;case"titleItalic":case"descItalic":if(typeof e!="number"){console.error("Invalid payload type for 'titleItalic' or 'descItalic'. Expected number.");return}t.setItalic(n.value.status[r],e);break;case"titleColor":case"descColor":if(typeof e!="string"){console.error("Invalid payload type for 'titleColor' or 'descColor'. Expected string.");return}t.setColor(n.value.status[r],e);break;case"options":if(!("options"in s.value))return!1;e!==void 0&&typeof e=="number"?t.removeOption(s.value[r],e)?b.success("删除成功"):b.error("至少保留两个选项"):e!==void 0&&typeof e=="object"&&O(e)?t.setPicLinkByIndex(s.value[r],e):t.addOption(s.value[r]);break;case"type":if(!("type"in s.value)||typeof e!="number")return!1;H(s.value,e),t.setCurrentStatus(s.value.type,e);break}}return(r,e)=>(m(),p("div",ae,[a(t).currentComponentIndex===-1?(m(),p("div",ce," 点击题目进行编辑 ")):(m(),p("div",ie,[c(Y,{com:n.value},null,8,["com"])]))]))}}),le=h(ue,[["__scopeId","data-v-ce9b7522"]]),me=["onClick"],de={class:"absolute delete-btn"},fe=C({__name:"ContentCenter",setup(k){const t=w(),n=P("centerContainerRef"),s=j([]),i=te(t.coms);y(()=>t.coms,()=>r()),y(()=>t.currentComponentIndex,o=>{if(o===-1)return!1;e(o)});function r(){B(()=>{const o=n.value;o&&window.scrollTo({top:o.scrollHeight,behavior:"smooth"})})}async function e(o){if(await B(),s.value){const d=s.value[o];d instanceof HTMLElement&&d.scrollIntoView({behavior:"smooth",block:"center"})}}function _(){t.changeCurrentIndex(-1)}function x(o){G.confirm("确定删除该组件吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.removeCom(o),b.success("删除成功")}).catch(()=>{b.info("已取消删除")})}function T(o){t.changeCurrentIndex(o),e(o)}function V(o,d){const v=o[d],f=o.filter(l=>!!l).shift();return v===null?f:v}return(o,d)=>{const v=F;return m(),p("div",{class:"center-container",ref_key:"centerContainerRef",ref:n},[c(a(ee),{modelValue:a(t).coms,"onUpdate:modelValue":d[0]||(d[0]=f=>a(t).coms=f),"item-key":"index",onStart:_},{item:g(({element:f,index:l})=>[(m(),p("div",{class:S(["content mb-10 relative",{active:a(t).currentComponentIndex===l}]),ref:I=>{s.value&&(s.value[l]=I)},key:f.id,onClick:I=>T(l)},[(m(),U(q(f.type),{seriaNum:V(a(i),l),status:f.status},null,8,["seriaNum","status"])),Q(u("div",de,[c(v,{type:"danger",size:"small",icon:a(Z),circle:"",onClick:A(I=>x(l),["stop"])},null,8,["icon","onClick"])],512),[[X,a(t).currentComponentIndex===l]])],10,me))]),_:1},8,["modelValue"])],512)}}}),pe=h(fe,[["__scopeId","data-v-344b0a42"]]),_e={class:"header"},ve={class:"container"},be=C({__name:"index",setup(k){const t=R(),n=w(),s=t.params.id;return n.resetComs(),s&&K(Number(s)).then(i=>{J(i.coms),n.setStore(i)}),(i,r)=>(m(),p("div",null,[u("div",_e,[c($,{"is-editor":!0,id:a(s)},null,8,["id"])]),u("div",ve,[c(re),c(le)]),u("div",null,[c(pe)])]))}}),ge=h(be,[["__scopeId","data-v-723ccfb3"]]);export{ge as default};
